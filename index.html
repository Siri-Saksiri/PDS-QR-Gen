<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>PDS QR Code Generator</title>
  <style>
    :root {
      --bg-dark: #0b0e17;
      --card-bg: #141b2d;
      --input-bg: #1e2538;
      --accent: #295c9b;
      --accent-light: #3d7bd4;
      --text-glow: rgba(61, 123, 212, 0.4);
    }

    * {
      box-sizing: border-box;
    }

    body {
      font-family: "Segoe UI", Arial, sans-serif;
      background: radial-gradient(circle at top, #162032, var(--bg-dark));
      color: #fff;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      margin: 0;
      padding: 20px;
    }

    .container {
      background: var(--card-bg);
      padding: 24px 28px;
      border-radius: 20px;
      width: 100%;
      max-width: 420px;
      box-shadow: 0 0 25px rgba(45, 90, 160, 0.15);
      transition: transform 0.2s ease, box-shadow 0.3s ease;
      text-align: center;
    }

    .container:hover {
      transform: translateY(-3px);
      box-shadow: 0 0 35px rgba(61, 123, 212, 0.25);
    }

    .logo {
      font-size: 2.8rem;
      font-weight: 800;
      margin-bottom: 4px;
      color: #cddcff;
      text-shadow:
        0 0 10px rgba(61, 123, 212, 0.6),
        0 0 20px rgba(61, 123, 212, 0.4);
      letter-spacing: 3px;
      font-family: "Poppins", sans-serif;
    }

    h2 {
      text-align: center;
      margin-bottom: 12px;
      letter-spacing: 1px;
      color: #cddcff;
      text-shadow: 0 0 6px var(--text-glow);
      font-size: 1.4rem;
      font-weight: 500;
    }

    input[type="text"], input[type="number"] {
      width: 100%;
      padding: 12px;
      margin: 8px 0;
      border: none;
      border-radius: 10px;
      outline: none;
      background: var(--input-bg);
      color: #fff;
      font-size: 1rem;
      transition: background 0.2s ease, box-shadow 0.3s ease;
    }

    input:focus {
      background: #25304a;
      box-shadow: 0 0 6px var(--accent-light);
    }

    button {
      width: 100%;
      padding: 12px;
      margin-top: 10px;
      background: linear-gradient(135deg, var(--accent), var(--accent-light));
      color: white;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      font-weight: bold;
      font-size: 1rem;
      transition: transform 0.2s ease, box-shadow 0.3s ease;
    }

    button:hover {
      transform: translateY(-2px);
      box-shadow: 0 0 15px rgba(61, 123, 212, 0.3);
    }

    #links-container {
      margin: 10px 0;
      max-height: 200px;
      overflow-y: auto;
      scrollbar-width: thin;
      scrollbar-color: var(--accent) #1e1e1e;
    }

    #links-container::-webkit-scrollbar {
      width: 6px;
    }

    #links-container::-webkit-scrollbar-thumb {
      background-color: var(--accent);
      border-radius: 10px;
    }

    img {
      display: block;
      margin: 15px auto;
      border-radius: 10px;
      background: white;
      max-width: 100%;
      height: auto;
    }

    footer {
      margin-top: 24px;
      text-align: center;
      font-size: 0.9rem;
      color: #a6bff0;
      text-shadow: 0 0 6px rgba(61, 123, 212, 0.3);
      letter-spacing: 0.4px;
      animation: subtleGlow 3s ease-in-out infinite alternate;
    }

    @keyframes subtleGlow {
      from { text-shadow: 0 0 6px rgba(61, 123, 212, 0.3); }
      to { text-shadow: 0 0 12px rgba(61, 123, 212, 0.5); }
    }

    /* Mobile Optimizations */
    @media (max-width: 480px) {
      .container {
        padding: 20px;
        max-width: 95%;
        border-radius: 16px;
      }

      .logo {
        font-size: 2.2rem;
        letter-spacing: 2px;
      }

      h2 {
        font-size: 1.25rem;
      }

      button {
        font-size: 0.95rem;
        padding: 10px;
      }

      footer {
        font-size: 0.8rem;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="logo">PDS</div>
    <h2>QR Code Generator</h2>

    <input type="number" id="quantity" min="1" max="100" value="1" placeholder="How many QR codes?" />
    <input type="text" id="size" value="400x400" placeholder="Image size (e.g. 400x400)" />

    <div id="links-container"></div>

    <button id="preview-btn">Generate Preview (First QR)</button>
    <img id="preview" src="" alt="QR Preview" style="display:none;" />
    <button id="export-btn" disabled>Export All QR Codes</button>
  </div>

  <footer>
    Developed by <strong>Siri Saksiri</strong> (PDS Computer Clubâ€™s President)
  </footer>

  <script>
    const quantityInput = document.getElementById('quantity');
    const sizeInput = document.getElementById('size');
    const linksContainer = document.getElementById('links-container');
    const previewBtn = document.getElementById('preview-btn');
    const exportBtn = document.getElementById('export-btn');
    const previewImg = document.getElementById('preview');

    function updateLinks() {
      linksContainer.innerHTML = '';
      const count = parseInt(quantityInput.value) || 1;
      for (let i = 0; i < count; i++) {
        const input = document.createElement('input');
        input.type = 'text';
        input.placeholder = `Link for QR #${i + 1}`;
        input.className = 'qr-link';
        linksContainer.appendChild(input);
      }
      exportBtn.disabled = count < 1;
    }

    quantityInput.addEventListener('input', updateLinks);
    updateLinks();

    previewBtn.addEventListener('click', () => {
      const size = sizeInput.value.trim();
      const firstLink = document.querySelector('.qr-link')?.value.trim();
      if (!firstLink) {
        alert("First QR code link is empty!");
        return;
      }
      if (!size.includes('x')) {
        alert("Size must be in format WIDTHxHEIGHT (e.g. 400x400).");
        return;
      }
      const url = `https://api.qrserver.com/v1/create-qr-code/?size=${size}&data=${encodeURIComponent(firstLink)}`;
      previewImg.src = url;
      previewImg.style.display = 'block';
    });

    exportBtn.addEventListener('click', async () => {
      const size = sizeInput.value.trim();
      const links = Array.from(document.querySelectorAll('.qr-link')).map(l => l.value.trim()).filter(Boolean);
      if (links.length === 0) {
        alert("Please fill in all QR data fields.");
        return;
      }

      const zip = new JSZip();
      for (let i = 0; i < links.length; i++) {
        const link = links[i];
        const url = `https://api.qrserver.com/v1/create-qr-code/?size=${size}&data=${encodeURIComponent(link)}`;
        const blob = await fetch(url).then(res => res.blob());
        zip.file(`qr_${i + 1}.png`, blob);
      }

      const blobZip = await zip.generateAsync({ type: 'blob' });
      const a = document.createElement('a');
      a.href = URL.createObjectURL(blobZip);
      a.download = 'QR_Codes.zip';
      a.click();
      URL.revokeObjectURL(a.href);
    });

    // Load JSZip dynamically
    const jszipScript = document.createElement('script');
    jszipScript.src = "https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js";
    document.body.appendChild(jszipScript);
  </script>
</body>
</html>
